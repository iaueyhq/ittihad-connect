<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ittihad Connect - Ultimate</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#f0f2f7;color:#333;display:flex;flex-direction:column;min-height:100vh;}
header{background:#1877f2;color:white;padding:10px 20px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:10;}
header h1{margin:0;font-size:22px;}
.nav-icons{display:flex;align-items:center;gap:10px;}
.nav-icons select,input,button{padding:5px;border-radius:5px;border:none;cursor:pointer;}
.container{display:flex;flex-wrap:wrap;justify-content:space-between;margin:20px;flex-grow:1;}
.sidebar,.feed,.trending{background:white;padding:15px;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}
.sidebar{flex:1;min-width:220px;max-width:250px;text-align:center;}
.sidebar img{width:80px;height:80px;border-radius:50%;margin-bottom:10px;}
.feed{flex:2;min-width:300px;margin:0 20px;}
.trending{flex:1;min-width:220px;max-width:250px;}
.post-box textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;resize:none;}
.post-box input[type=file]{margin-top:5px;}
.post-box button{width:100%;padding:10px;background:#1877f2;color:white;border:none;border-radius:8px;margin-top:5px;cursor:pointer;}
.post{border:1px solid #ddd;padding:10px;border-radius:8px;margin-top:15px;background:#fafafa;transition:0.2s;}
.post:hover{box-shadow:0 4px 12px rgba(0,0,0,0.15);}
.post img,.post video{max-width:100%;margin-top:10px;border-radius:8px;}
.post-actions{display:flex;justify-content:space-between;margin-top:10px;}
.post-actions button{background:none;border:none;color:#1877f2;cursor:pointer;font-weight:bold;}
.comment-box{display:flex;align-items:center;margin-top:10px;}
.comment-box input{flex:1;padding:8px;border-radius:8px;border:1px solid #ccc;margin-right:5px;}
.comment-box button{padding:8px;background:#1877f2;color:white;border:none;border-radius:8px;cursor:pointer;}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);justify-content:center;align-items:center;z-index:20;}
.modal-content{background:white;padding:20px;border-radius:10px;max-width:400px;width:90%;max-height:80vh;overflow-y:auto;position:relative;}
.close-btn{position:absolute;top:10px;right:10px;cursor:pointer;font-weight:bold;font-size:18px;}
.dark-mode{background:#18191a;color:#e4e6eb;}
.dark-mode header{background:#242526;}
.dark-mode .sidebar,.dark-mode .feed,.dark-mode .trending,.dark-mode .modal-content{background:#242526;color:#e4e6eb;}
footer{background:#1877f2;color:white;padding:15px;text-align:center;border-top:1px solid #145dbf;margin-top:20px;}
footer a{color:white;text-decoration:none;margin:0 10px;font-size:14px;}
#backTop{position:fixed;bottom:20px;right:20px;padding:10px;border:none;border-radius:50%;background:#1877f2;color:white;cursor:pointer;box-shadow:0 2px 5px rgba(0,0,0,0.3);}
</style>
</head>
<body>

<header>
<h1>Ittihad Connect</h1>
<div class="nav-icons">
<select id="userSelect" onchange="switchUser()"></select>
<input type="text" id="searchBar" placeholder="Search posts..." onkeyup="searchPosts()">
<button onclick="toggleDarkMode()">üåô</button>
<button onclick="showNotifications()">üîî <span id="notifCount">0</span></button>
</div>
</header>

<div class="container">
<div class="sidebar" id="profilePanel">
<img src="" alt="Avatar" id="profileAvatar">
<input type="file" id="avatarUpload" accept="image/*" onchange="updateAvatar()">
<h3 contenteditable id="profileName" onblur="saveProfile()"></h3>
<p contenteditable id="profileGrades" onblur="saveProfile()"></p>
<p contenteditable id="profileBio" onblur="saveProfile()"></p>
<h4>Friends</h4>
<ul id="myFriends"></ul>
<h4>Suggested Friends</h4>
<ul id="suggestedFriends"></ul>
</div>

<div class="feed">
<div class="post-box">
<textarea id="postText" placeholder="What's on your mind?"></textarea>
<input type="file" id="mediaUpload" accept="image/*,video/*">
<button onclick="createPost()">Post</button>
</div>
<div id="posts"></div>
</div>

<div class="trending">
<h4>Trending Posts</h4>
<ul id="trendingList"></ul>
</div>
</div>

<!-- Profile Modal -->
<div id="profileModal" class="modal">
<div class="modal-content" id="profileModalContent">
<span class="close-btn" onclick="closeModal()">√ó</span>
<img src="" id="modalAvatar" style="width:80px;height:80px;border-radius:50%;">
<h3 id="modalName"></h3>
<p id="modalGrades"></p>
<p id="modalBio"></p>
<h4>Posts:</h4>
<div id="modalPosts"></div>
</div>
</div>

<!-- Footer Modal -->
<div id="footerModal" class="modal">
<div class="modal-content">
<span class="close-btn" onclick="closeFooterModal()">√ó</span>
<h3 id="footerModalTitle"></h3>
<p id="footerModalContent"></p>
</div>
</div>

<footer>
<div>
<a href="javascript:void(0)" onclick="showFooterModal('About','Ittihad Connect is a next-gen social platform.')">About</a>
<a href="javascript:void(0)" onclick="showFooterModal('Help','Here you can find help for using Ittihad Connect.')">Help</a>
<a href="javascript:void(0)" onclick="showFooterModal('Careers','We are hiring! Join Ittihad Connect.')">Careers</a>
<a href="javascript:void(0)" onclick="showFooterModal('Terms','Terms of Service will appear here.')">Terms</a>
<a href="javascript:void(0)" onclick="showFooterModal('Privacy','Privacy Policy will appear here.')">Privacy</a>
<a href="javascript:void(0)" onclick="showFooterModal('Settings','You can change your settings here.')">Settings</a>
</div>
<p>&copy; 2025 Ittihad Connect. All rights reserved.</p>
</footer>

<button id="backTop" onclick="window.scrollTo({top:0,behavior:'smooth'});">‚Üë</button>

<script>
let data=JSON.parse(localStorage.getItem('ittihadData'))||{users:[{name:'You',grades:'Grades: A,B,C',bio:'Welcome!',avatar:'',friends:[],notifications:[],posts:[]},{name:'Jane',grades:'Grades: B,A,A',bio:'Hello!',avatar:'',friends:[],notifications:[],posts:[]},{name:'Ali',grades:'Grades: A,B,B',bio:'Hey!',avatar:'',friends:[],notifications:[],posts:[]},{name:'Sara',grades:'Grades: C,B,A',bio:'Hi!',avatar:'',friends:[],notifications:[],posts:[]} ]};
let currentUserIndex=0;

function saveData(){localStorage.setItem('ittihadData',JSON.stringify(data)); renderProfile(); renderPosts(); renderFriends(); updateTrending(); updateNotifCount();}
function switchUser(){currentUserIndex=document.getElementById('userSelect').selectedIndex; saveData();}
function renderUserSelect(){const sel=document.getElementById('userSelect'); sel.innerHTML=''; data.users.forEach(u=>sel.innerHTML+=`<option>${u.name}</option>`); sel.selectedIndex=currentUserIndex;}
function renderProfile(){const user=data.users[currentUserIndex];document.getElementById('profileName').innerText=user.name;document.getElementById('profileGrades').innerText=user.grades;document.getElementById('profileBio').innerText=user.bio;document.getElementById('profileAvatar').src=user.avatar||'';}
function updateAvatar(){const file=document.getElementById('avatarUpload').files[0];if(file){const reader=new FileReader();reader.onload=e=>{data.users[currentUserIndex].avatar=e.target.result;saveData();};reader.readAsDataURL(file);}}
function saveProfile(){const user=data.users[currentUserIndex];user.name=document.getElementById('profileName').innerText;user.grades=document.getElementById('profileGrades').innerText;user.bio=document.getElementById('profileBio').innerText;saveData();}
function createPost(){const text=document.getElementById('postText').value.trim();if(!text)return alert('Write something first!');let media=document.getElementById('mediaUpload').files[0];if(media){const reader=new FileReader();reader.onload=e=>{data.users[currentUserIndex].posts.unshift({text,media:e.target.result,likes:0,comments:[],time:new Date().toLocaleString()});document.getElementById('postText').value='';document.getElementById('mediaUpload').value='';saveData();};reader.readAsDataURL(media);}else{data.users[currentUserIndex].posts.unshift({text,media:'',likes:0,comments:[],time:new Date().toLocaleString()});document.getElementById('postText').value='';saveData();}}
function renderPosts(filtered=null){const container=document.getElementById('posts');container.innerHTML='';const allPosts=data.users.flatMap(u=>u.posts.map(p=>({...p,author:u.name})));const postsToRender=filtered||allPosts;postsToRender.forEach((p,i)=>{const mediaHTML=p.media?p.media.startsWith('data:image')?`<img src="${p.media}">`:`<video controls src="${p.media}"></video>`:'';const isOwn=p.author===data.users[currentUserIndex].name;container.innerHTML+=`<div class="post"><b onclick="viewProfile('${p.author}')">${p.author}</b><p>${p.text}</p>${mediaHTML}<small>${p.time}</small><div class="post-actions"><button onclick="likePost('${p.author}',${i})">üëç ${p.likes}</button>${isOwn?`<button onclick="editPost('${p.author}',${i})">‚úèÔ∏è</button><button onclick="deletePost('${p.author}',${i})">üóë</button>`:''}</div><div class="comment-box"><input id="comment-${p.author}-${i}" placeholder="Write a comment..."><button onclick="addComment('${p.author}',${i})">Reply</button></div><div>${p.comments.map(c=>`<p>üí¨ ${c}</p>`).join('')}</div></div>`;});}
function likePost(author,index){const user=data.users.find(u=>u.name===author);user.posts[index].likes++;addNotificationForUser(author,`${data.users[currentUserIndex].name} liked your post`);saveData();}
function editPost(author,index){if(author!==data.users[currentUserIndex].name)return;const user=data.users.find(u=>u.name===author);const txt=prompt("Edit post:",user.posts[index].text);if(txt!==null){user.posts[index].text=txt;saveData();}}
function deletePost(author,index){if(author!==data.users[currentUserIndex].name)return;if(confirm("Delete this post?")){const user=data.users.find(u=>u.name===author);user.posts.splice(index,1);saveData();}}
function addComment(author,index){const inp=document.getElementById(`comment-${author}-${index}`);if(!inp.value.trim())return;const user=data.users.find(u=>u.name===author);user.posts[index].comments.push(`${data.users[currentUserIndex].name}: ${inp.value.trim()}`);addNotificationForUser(author,`${data.users[currentUserIndex].name} commented on your post`);inp.value='';saveData();}
function renderFriends(){const user=data.users[currentUserIndex];const myList=document.getElementById('myFriends');myList.innerHTML='';user.friends.forEach(f=>myList.innerHTML+=`<li>${f} <button onclick="removeFriend('${f}')">Remove</button></li>`);const sugList=document.getElementById('suggestedFriends');sugList.innerHTML='';data.users.forEach(u=>{if(u.name!==user.name&&!user.friends.includes(u.name))sugList.innerHTML+=`<li>${u.name} <button onclick="addFriend('${u.name}')">Add</button></li>`;});}
function addFriend(name){const user=data.users[currentUserIndex];if(!user.friends.includes(name)){user.friends.push(name);addNotificationForUser(name,`${user.name} sent you a friend request`);saveData();}}
function removeFriend(name){const user=data.users[currentUserIndex];user.friends=user.friends.filter(f=>f!==name);saveData();}
function addNotification(msg){data.users[currentUserIndex].notifications.push(msg);updateNotifCount();}
function addNotificationForUser(name,msg){const u=data.users.find(u=>u.name===name);u.notifications.push(msg);}
function showNotifications(){const notifs=data.users[currentUserIndex].notifications;if(notifs.length===0){alert("No notifications");}else{alert(notifs.join('\n'));data.users[currentUserIndex].notifications=[];saveData();}updateNotifCount();}
function updateNotifCount(){document.getElementById('notifCount').innerText=data.users[currentUserIndex].notifications.length;}
function updateTrending(){const allPosts=data.users.flatMap(u=>u.posts.map(p=>({...p,author:u.name})));allPosts.sort((a,b)=>b.likes-a.likes);const list=document.getElementById('trendingList');list.innerHTML='';allPosts.slice(0,5).forEach(p=>list.innerHTML+=`<li onclick="viewProfile('${p.author}')">${p.author}: ${p.text.substring(0,30)}... (${p.likes}üëç)</li>`);}
function searchPosts(){const query=document.getElementById('searchBar').value.toLowerCase();const filtered=data.users.flatMap(u=>u.posts.map(p=>({...p,author:u.name}))).filter(p=>p.text.toLowerCase().includes(query));renderPosts(filtered);}
function viewProfile(name){const user=data.users.find(u=>u.name===name);const modal=document.getElementById('profileModal');modal.style.display='flex';document.getElementById('modalAvatar').src=user.avatar||'';document.getElementById('modalName').innerText=user.name;document.getElementById('modalGrades').innerText=user.grades;document.getElementById('modalBio').innerText=user.bio;const postsDiv=document.getElementById('modalPosts');postsDiv.innerHTML='';user.posts.forEach(p=>{const media=p.media?p.media.startsWith('data:image')?`<img src="${p.media}">`:`<video controls src="${p.media}"></video>`:'';postsDiv.innerHTML+=`<div class="post"><p>${p.text}</p>${media}</div>`;});}
function closeModal(){document.getElementById('profileModal').style.display='none';}
function toggleDarkMode(){document.body.classList.toggle('dark-mode');document.querySelectorAll('.modal-content').forEach(c=>c.classList.toggle('dark-mode'));}
function showFooterModal(title,text){document.getElementById('footerModalTitle').innerText=title;document.getElementById('footerModalContent').innerText=text;document.getElementById('footerModal').style.display='flex';}
function closeFooterModal(){document.getElementById('footerModal').style.display='none';}

renderUserSelect(); renderProfile(); renderPosts(); renderFriends(); updateTrending(); updateNotifCount();
</script>

</body>
</html>
